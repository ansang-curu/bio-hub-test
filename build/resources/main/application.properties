# ========================================
# BioDataHub Application Configuration
# ========================================
spring.application.name=biodata-hub
server.port=8080

# ========================================
# Database Configuration (Profile-specific)
# ========================================
# Database settings are in application-railway.properties for Railway deployment
# and can be added here for local development if needed

# HikariCP Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=50000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# Database Performance Optimization
spring.jpa.properties.hibernate.jdbc.batch_size=10
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Large Data Handling
spring.datasource.hikari.data-source-properties.useServerPrepStmts=false
spring.datasource.hikari.data-source-properties.cachePrepStmts=false
spring.datasource.hikari.data-source-properties.rewriteBatchedStatements=true

# ========================================
# MyBatis Configuration
# ========================================
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.biodatahub.model
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.use-generated-keys=true
mybatis.configuration.default-fetch-size=100
mybatis.configuration.default-statement-timeout=30
mybatis.configuration.default-enum-type-handler=org.apache.ibatis.type.EnumTypeHandler


# ========================================
# File Upload Configuration for FASTA Files
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=10MB
spring.servlet.multipart.resolve-lazily=true

# Custom File Storage Settings
biodatahub.file.upload-dir=uploads/fasta
biodatahub.file.temp-dir=temp
biodatahub.file.max-file-size=50MB
biodatahub.file.allowed-extensions=.fasta,.fa,.fas,.fna,.ffn,.faa,.frn


# ========================================
# Async Processing Configuration
# ========================================
spring.task.execution.pool.core-size=8
spring.task.execution.pool.max-size=32
spring.task.execution.pool.queue-capacity=1000
spring.task.execution.thread-name-prefix=biodatahub-async-
spring.task.execution.pool.keep-alive=60s

spring.task.scheduling.pool.size=4
spring.task.scheduling.thread-name-prefix=biodatahub-scheduled-

# ========================================

# ========================================
# Performance & Optimization Settings
# ========================================
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# HTTP/2 Support
server.http2.enabled=true

# ========================================
# Logging Configuration
# ========================================
logging.level.com.biodatahub=INFO
logging.level.org.mybatis=INFO
logging.level.org.springframework.cache=DEBUG
logging.level.org.springframework.batch=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ========================================
# Database Schema Initialization
# ========================================
spring.sql.init.mode=never
# spring.sql.init.schema-locations=classpath:schema.sql
# spring.sql.init.continue-on-error=true

# ========================================
# Custom BioDataHub Settings
# ========================================
biodatahub.analysis.chunk-size=10000
biodatahub.analysis.max-concurrent-jobs=5